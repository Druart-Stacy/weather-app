import { fetchWeatherData, getWeatherIconUrl } from './weather';
import { fetchWeatherData, getWeatherIconUrl } from './weather';
import { displayWeather, displayWeatherIcon, displayPhoto } from './ui';
import { renderChart } from './chart.js';
import { getCityPhoto } from './unsplash';

const cityForm = document.getElementById('city-form');
const cityInput = document.getElementById('city-input');
const addCityButton = document.getElementById('add-city-button'); // Corrigé : renommage de 'addcitybutton' en 'addCityButton'

cityForm.addEventListener('submit', async (e) => {
    e.preventDefault();
    const city = cityInput.value.trim();
    // Supprimé : const city2 = addCityButton.value.trim(); car 'addCityButton' ne contient pas une valeur utile ici.
    if (city) {
        try {
            const weatherData = await fetchWeatherData(city, '1d05715f85aa25a75f149917e53482cf');
            displayWeather(weatherData);
            displayWeatherIcon(getWeatherIconUrl(weatherData.weather[0].icon));
            await displayPhoto(await getCityPhoto(city, 'T4dPSXMnbr7qtsaqFg8-UPnjpOBrVW06QvjK1O2ndws')); // Corrigé : ajout de 'displayPhoto' pour afficher la photo
        } catch (error) {
            console.error('Error fetching weather data:', error);
        }
    }
});
